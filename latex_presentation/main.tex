% !TeX program = lualatex

\documentclass[10pt]{beamer}

\usetheme{polimi}

% Full instructions available at:
% https://github.com/elauksap/beamerthemepolimi

% Pacchetti
\usepackage{tikz}
\usetikzlibrary{positioning}
\usepackage{tabularx}
\usepackage{xcolor}
\usepackage{enumitem}
\usepackage{soul}
\usepackage[binary-units=true]{siunitx}
\usepackage{multirow}
\usepackage{multicol}
\usepackage{array}
\usepackage{listings}
\usepackage{parcolumns}
\usepackage{graphicx}
\usepackage[font=footnotesize]{subfig}
\usepackage{mathtools}
% http://www-ljk.imag.fr/membres/Jerome.Lelong/latex/appendixnumberbeamer.sty
% Reference: http://tex.stackexchange.com/questions/2541/beamer-frame-numbering-in-appendix
\usepackage{appendixnumberbeamer}
% Add total frame count to slides, optional. From Stefan,
% http://www.latex-community.org/forum/viewtopic.php?f=4&t=2173
\expandafter\def\expandafter\insertshorttitle\expandafter{%
  \insertshorttitle\hfill\insertframenumber\,/\,\inserttotalframenumber}
% Set custom font (requires to compile with XeLaTeX).
\usepackage{ifxetex}
\ifxetex
    \usepackage{fontspec}
    \setsansfont[Scale=0.85]{Arial}
\fi

% Opzioni
\pdfstringdefDisableCommands{\def\\{}}
\usetikzlibrary{arrows}
\usetikzlibrary{calc}
\setlength{\leftmargini}{10pt}
\newcommand{\norm}[1]{\left\lVert#1\right\rVert}
\newcommand{\tikzrarrow}{\tikz\draw[>=triangle 60, ->](0,0) -- (0.5,0) node{};}
\newcommand{\tikzlarrow}{\tikz\draw[>=triangle 60, <-](0,0) -- (0.5,0) node{};}
\newcommand{\tikzrarrowspace}{\tikz\draw[ ](0,0) (0.5,0) node{};}
\newcommand{\tikzlnode}[1]{\tikz[baseline=-.5ex] \node[coordinate] (#1) {};}
\newcommand{\tikzcnode}[2]{\tikz[baseline]{\node[anchor=base] (#1){#2}}}
\newcommand\Wider[2][3em]{%
    \makebox[\linewidth][c]{%
        \begin{minipage}{\dimexpr\textwidth+#1\relax}
            \raggedright#2
        \end{minipage}%
    }%
}
\tikzstyle{every picture}+=[remember picture]
\setitemize{label=\usebeamerfont*{itemize item}%
    \usebeamercolor[fg]{itemize item}
    \usebeamertemplate{itemize item}}

\definecolor{mygreen}{HTML}{008300}

\title{Analysis and validation of spaceborne \\ synthetic imagery using a Vision-Based pose \\ initialization algorithm for non-cooperative \\ spacecrafts}
\subtitle{}
\author{Francescodario Cuzzocrea}
\date{\today}

\begin{document}

% Serve per eliminare Figure o Table dalle caption
\setbeamertemplate{caption}{\raggedright\insertcaption\par}
{
  \vfuzz=90pt
}

\begin{frame}
  \maketitle
\end{frame}

\section{Introduction}

% Section page.
\begin{frame}[plain]{}
  \sectionpage
\end{frame}

\begin{frame}{Introduction}

  \smallskip

  \textsc{\textbf{\large Pose determination for close range proximity operations using monocular camera}}

  \bigskip

  \begin{minipage}[t]{0.4\textwidth}
    \vspace{0.01mm}
    Purposes:
  \end{minipage}%
  \begin{minipage}[t]{0.6\textwidth}
    \vspace{0.01mm}
    \begin{itemize}[label=$\bullet$]
      \item Formation Flying (FF)
      \item On-Orbit Servicing (OOS)
      \item Active Debris Removal (ADR)
    \end{itemize}
  \end{minipage}

  \bigskip

  \begin{minipage}[t]{0.4\textwidth}
    \vspace{0.01mm}
    Advantages:
  \end{minipage}%
  \begin{minipage}[t]{0.6\textwidth}
    \vspace{0.01mm}
    \begin{multicols}{2}
    \begin{itemize}[label=$\bullet$]
      \item Reliability
      \item Simplicity
      \item Low weight
      \item Low power
    \end{itemize}
    \end{multicols}
  \end{minipage}

  \bigskip

  \centering
  
  Challenge \hspace{0.2cm} \tikzrarrow \hspace{0.2cm} Estimate the \alert{pose} of an \alert{uncooperative} target from\\ \hspace{-2cm} a \alert{monocular} image

\end{frame}

\begin{frame}{Problem Statement}

  \bigskip

  \textsc{\textbf{\large Monocular algorithm requirements}}

  \bigskip

  \begin{overlayarea}{\textwidth}{0.8\textheight}
    \begin{minipage}{0.53\textwidth}

      \smallskip

      \hspace{1.0cm}
      \begin{itemize}[leftmargin=0.5cm]
        \item{Target 3D model availability}
              \smallskip
        \item{On-Board real-time execution}
              \smallskip
        \item{Robustness to illumination}
              \smallskip
        \item{Robustness to background}
              \smallskip
        \item{Robustness to variability of pose}
              \smallskip
      \end{itemize}
    \end{minipage}
    \hfill
    \begin{minipage}{0.44\textwidth}
      \begin{tikzpicture}
        \node (img) {\includegraphics[width=0.8\textwidth]{gfx/poseProblem.eps}};
        \node [above right,text width=0.4\textwidth,align=right,xshift=25mm, yshift=3mm] at (img.south west){\footnotesize
          $(\mathbf{A_{TC}},\mathbf{t_C})= \ ?$
        };
      \end{tikzpicture}
    \end{minipage}

    \bigskip

    \tikzrarrow Need a \alert{representative} data-set to develop image processing algorithms

    \smallskip

    \tikzrarrow A lack of realism can lead to \alert{wrong} assumptions and thus \alert{incoherent} \\ \tikzrarrowspace results
    \hfill
  \end{overlayarea}

\end{frame}

\begin{frame}{Available Solutions}

  \bigskip

  \begin{overlayarea}{\textwidth}{0.8\textheight}

    \centering

    \textsc{\ul{ESA PANGU}}\hspace{2.8cm}\textsc{\ul{SPEED Data-Set}}

    \begin{columns}[T,onlytextwidth]
      \hspace{1.6cm}
      \begin{column}{0.5\textwidth}
        \includegraphics[width=0.45\textwidth]{gfx/pangu3.eps}
      \end{column}
      \hspace{-0.78cm}
      \begin{column}{0.5\textwidth}
        \includegraphics[width=0.35\textwidth]{gfx/speed.eps}
      \end{column}
    \end{columns}

    \vspace{0.3cm}

    \hspace{-0.25cm}\textsc{\ul{Airbus SurRender}}\hspace{1.8cm}\textsc{\ul{URSO Data-Set}}

    \begin{columns}[T,onlytextwidth]
      \hspace{1.58cm}
      \begin{column}{0.5\textwidth}
        \includegraphics[width=0.44\textwidth]{gfx/surrender.eps}
      \end{column}
      \hspace{-0.78cm}
      \begin{column}{0.5\textwidth}
        \includegraphics[width=0.52\textwidth]{gfx/URSO.eps}
      \end{column}
    \end{columns}
  \end{overlayarea}
\end{frame}

\begin{frame}{Motivation}

  \bigskip

  \textsc{\textbf{\large Data-set requirements}}

  \smallskip

  \tikzrarrow Emerges the need for a tool capable of rendering images for CV algorithms \\ \tikzrarrowspace training which must:
  \smallskip
  \begin{itemize}[leftmargin=1.5cm,label=-]
    \item be affordable for small research center or small companies
    \item be capable of rendering different kinds S/C
    \item be able to accomodate solar-system sized scenes
    \item be able to also render composite background
  \end{itemize}

  \bigskip

  \textbf{\textsc{\large Aim of the thesis}} \tikzrarrow
  Develop a tool capable of producing a data-set of images \alert{representative} of in-orbit real operative conditions and use them to implement and test a State-of-Art pose initialization algorithm
\end{frame}

\section{Synthetic Image Generation}

% Section page.
\begin{frame}[plain]{}
  \sectionpage
\end{frame}

\begin{frame}{Ray Tracing}

  \bigskip

  \textsc{\textbf{POV-Ray represents a viable solution}}

  \bigskip

  \tikzrarrow It simulates the physics of light! \\

  \smallskip

  \begin{minipage}[t]{0.5\textwidth}
    \vspace{0.01mm}
    \begin{itemize}[leftmargin=0.7cm,label=$\bullet$]
      \item Support meshes for objects
      \item Customizable textures support
      \item Customizable optical properties
      \item Customizable light properties
      \item Customizable camera parameters
      \item Accepted by ESA in past studies
    \end{itemize}

  \end{minipage}%
  \begin{minipage}[t]{0.5\textwidth}
    \vspace{0.15cm}
    \hspace{-0.5cm}
    \centering
    \includegraphics[width=0.85\textwidth]{gfx/ray-tracing.eps}
  \end{minipage}

  \smallskip

  \tikzrarrow Noise can be modeled and added \textit{a posteriori} to enhance fidelity. \\

  \bigskip

\end{frame}


\begin{frame}{Environment Modeling}

  \textsc{\textbf{\large Earth and Light Modeling}}

  \smallskip

  \tikzrarrow Use three different layers to differentiate optical parameters and textures \\ \tikzrarrowspace for seasonality variations

  \tikzrarrow Include 25 km tick atmosphere with scattering properties

  \vspace{-0.3cm}
  \begin{columns}[T,onlytextwidth]
    \begin{column}{0.5\textwidth}
      \begin{figure}
        \captionsetup[subfigure]{labelformat=empty}
        \centering
        \subfloat[Terrain]{\includegraphics[width=0.32\textwidth]{gfx/earthMercator.eps}}
        \qquad
        \subfloat[Landmask]{\includegraphics[width=0.32\textwidth]{gfx/landmask_mercator.eps}}
        \qquad
        \subfloat[Clouds]{\includegraphics[width=0.32\textwidth]{gfx/clouds.eps}}
        \qquad
      \end{figure}
    \end{column}
    \begin{column}{0.5\textwidth}
      \begin{figure}
        \captionsetup[subfigure]{labelformat=empty}
        \centering
        \includegraphics[width=0.64\textwidth]{gfx/TerraSiAcquaSiAtmo.eps}
      \end{figure}
    \end{column}
  \end{columns}
  \bigskip
  \tikzrarrow The Sun has been modeled using POV-Ray \textbf{area\_light} feature
\end{frame}

\begin{frame}{Spacecraft Modeling}

  \bigskip

  \textsc{\textbf{\large 3D Model of the Spacecraft}}

  \bigskip

  \tikzrarrow Based on the TANGO spacecraft from the PRISMA mission to perform\\ \tikzrarrowspace comparison with SPEED

  \vspace{-0.55cm}

  \begin{columns}[T,onlytextwidth]
    \begin{column}{0.5\textwidth}
      \begin{figure}
        \captionsetup[subfigure]{labelformat=empty}
        \centering
        \subfloat[CAD]{\includegraphics[width=0.32\textwidth]{gfx/tangoScreenshot2.eps}}
        \qquad
        \subfloat[Blender]{\includegraphics[width=0.32\textwidth]{gfx/tangoBlenderCut.eps}}
        \qquad
        \subfloat[POV-Ray]{\includegraphics[width=0.32\textwidth]{gfx/tango_2Cut.eps}}
        \qquad
      \end{figure}
    \end{column}
    \begin{column}{0.5\textwidth}
      \vspace{0.6cm}
      \begin{itemize}[label=$\bullet$]
        \item CAD is created using Autodesk Inventor
        \item Imported in Blender to exploit POV-Ray add-on
        \item Textures are applied
        \item Optical parameters are defined
        \item SDL code is refactord for MATLAB implementation
      \end{itemize}
    \end{column}
  \end{columns}

  \smallskip

  \tikzrarrow Process has to be carried out only one time per S/C

  \smallskip

\end{frame}

\begin{frame}{Camera Modeling}

  \bigskip

  \textsc{\textbf{\large Simulate a pin-hole camera}}

  \bigskip

  \tikzrarrow POV-Ray allows to set camera aperture angle $\alpha$ and Aspect Ratio:

  \smallskip

  \begin{minipage}[t]{0.5\textwidth}

    \begin{equation*}
      CCD_{size} = d_u \cdot N_u \,
    \end{equation*}

    \begin{equation*}
      \alpha = 2 \cdot \arctan{\left( \frac{CCD_{size}}{2 \cdot f_x} \right)} \,
    \end{equation*}
    \centering
    \begin{tikzpicture}
      \node (img) {\includegraphics[width=0.3\textwidth]{gfx/angle.eps}};
      \node [above right,text width=0.3\textwidth,align=left,xshift=0mm, yshift=0mm] at (img.south west){\footnotesize
        $\color{mygreen}\alpha$
      };
    \end{tikzpicture}
  \end{minipage}%
  \begin{minipage}[t]{0.5\textwidth}
    \hspace{-0.5cm}
    \centering
    \begin{equation*}
      A. R. = \frac{N_u}{N_v} \,
    \end{equation*}
    \begin{tabular}{cc}
      $N_u$ & Number of horizontal pixels \\
      $N_v$ & Number of vertical pixels   \\
      $f_x$ & Horizontal focal length     \\
      $d_u$ & Horizontal pixel length     \\
    \end{tabular}
  \end{minipage}

  \bigskip

  \tikzrarrow Under the assumption of square CCD sensor having square pixels

  \smallskip

  \tikzrarrow If camera model is known, distortion can be added in post-processing 

  \smallskip

\end{frame}

\begin{frame}{Noise Modeling}

  \bigskip

  \textsc{\textbf{\large Add Gaussian white noise and speckle noise}}

  \bigskip

  \tikzrarrow To enhance the fidelity noise is added to the image

  \begin{figure}
    \captionsetup[subfigure]{labelformat=empty}
    \centering
    \subfloat[Normal]{\includegraphics[width=0.27\textwidth]{gfx/detailNoNoise.eps}}
    \qquad
    \subfloat[Noisy]{\includegraphics[width=0.27\textwidth]{gfx/detailNoise.eps}}
    \qquad
  \end{figure}

  Gaussian: $\sigma^2 = 0.003$ \\
  Speckle: $\sigma^2 = 0.004$

  \bigskip
\end{frame}

\begin{frame}{MATLAB/Simulink Integration}

  \bigskip

  \textsc{\textbf{\large Simulink Model }}

  \bigskip

  \hspace{0.3cm}\tikzrarrow Simulate uncontrolled behavior on LEO orbit

  \smallskip

  \hspace{0.3cm}\tikzrarrow Easily extendable to include controlled behavior too

  \smallskip

  \hspace{0.3cm}\tikzrarrow Chaser constrained to be between 3 to 18 meters far from the target

  \smallskip

  \hspace{0.3cm}\tikzrarrow Extendable to simulate precise chaser approach

  \bigskip

  \textsc{\textbf{\large MATLAB Functions}}

  \bigskip

  \hspace{0.3cm}\tikzrarrow Write \texttt{.pov} SDL files for each image

  \smallskip

  \hspace{0.3cm}\tikzrarrow Annotate ground truth pose for each image

  \smallskip

  \hspace{0.3cm}\tikzrarrow Sets relevant POV-Ray options and run it

  \smallskip

  \hspace{0.3cm}\tikzrarrow Can re-parse ground truth pose for each image

  \bigskip

\end{frame}


\begin{frame}{Results}

  \bigskip

  \textsc{\textbf{\large Samples}}

  \vspace{-0.2cm}

  \begin{figure}
    \centering
    \captionsetup[subfigure]{labelformat=empty}
    \subfloat[]{\includegraphics[width=0.3\textwidth]{gfx/tango/tango_14.eps}}
    \hspace{0.2cm}
    \subfloat[]{\includegraphics[width=0.3\textwidth]{gfx/tango/tango_15.eps}}
    \hspace{0.2cm}
    \subfloat[]{\includegraphics[width=0.3\textwidth]{gfx/tango/tango_31.eps}}\\
    \vspace{-0.45cm}
    \subfloat[]{\includegraphics[width=0.3\textwidth]{gfx/tango/tango_60.eps}}
    \hspace{0.2cm}
    \subfloat[]{\includegraphics[width=0.3\textwidth]{gfx/tango/tango_259.eps}}
    \hspace{0.2cm}
    \subfloat[]{\includegraphics[width=0.3\textwidth]{gfx/tango/tango_268.eps}}
  \end{figure}

  \vspace{-0.2cm}
  \centering
  \alert{\textbf{WARNING}}: Custom POV-Ray version needed to replicate results

  \bigskip

\end{frame}

\section{The SVD Architecture for Pose Initialization}

% Section page.
\begin{frame}[plain]{}
  \sectionpage
\end{frame}

\begin{frame}{Introduction}

  \vspace{0.2cm}

  \textsc{\textbf{\large Solve the pose initialization problem}}

  \vspace{0.3cm}

  \tikzrarrow \textbf{General architecture}

  \begin{minipage}[t]{1.0\textwidth}
    \centering
    \includegraphics[width=\textwidth]{gfx/SVDPipeline.eps}
  \end{minipage}%

  \vspace{0.3cm}

  \tikzrarrow \textbf{Enhance current State-of-the-art}

  \smallskip

  \begin{itemize}[leftmargin=1.1cm,label=$\bullet$]
    \item Introduces WGE technique which allows to distinguish S/C from background and allows to determine a ROI
          \smallskip
    \item Uses 2D/3D feature groups  to solve feature correspondence \\ problem
  \end{itemize}

\end{frame}

\begin{frame}{Feature-based pose estimation}

  \bigskip

  \textsc{\textbf{\large Image processing subsystem - 1}}

  \bigskip

  \tikzrarrow \textbf{Weak Gradient Eliminator}

  \smallskip

  Most of the gradient intensities are weak and corresponds to the feature in the background or on the spacecraft surface $\rightarrow$ Treshold normalized gradient

  \vspace{-0.5cm}
  \begin{columns}[T,onlytextwidth]
    \hspace{0.2cm}
    \begin{column}{0.5\textwidth}
      \begin{figure}
        \captionsetup[subfigure]{labelformat=empty}
        \subfloat[Original image]{\includegraphics[width=0.41\textwidth]{gfx/FeatureDetection/chosenImage.eps}}
        \hspace{0.1cm}\subfloat[Normal gradient]{\includegraphics[width=0.41\textwidth]{gfx/FeatureDetection/gradientBeforeTresholding.eps}}\\
        \subfloat[Histogram]{\includegraphics[width=0.41\textwidth]{gfx/FeatureDetection/gradientDistribution.eps}}
        \hspace{0.1cm}\subfloat[Tresholding]{\includegraphics[width=0.41\textwidth]{gfx/FeatureDetection/imageAfterTresholding.eps}}
      \end{figure}
    \end{column}
    \begin{column}{0.5\textwidth}
      \vspace{0.6cm}
      \begin{figure}
        \captionsetup[subfigure]{labelformat=empty}
        \includegraphics[width=0.82\textwidth]{gfx/FeatureDetection/ROI.eps}\\
        {\footnotesize Found by limiting CDFs of the vertical and horizontal gradient of WGE filtered image}
      \end{figure}
    \end{column}
  \end{columns}

\end{frame}

\begin{frame}{Feature-based pose estimation}

  \bigskip

  \textsc{\textbf{\large Image processing subsystem - 2}}

  \smallskip

  \begin{columns}[T,onlytextwidth]
    \hspace{-0.2cm}
    \begin{column}{0.5\textwidth}
      \includegraphics[height=0.4\textheight]{gfx/imageProcessingSubsystem2.eps}
    \end{column}
    \hspace{1cm}
    \begin{column}{0.43\textwidth}
      \vspace{0.3cm}
      {\small\begin{itemize}[label=$\rightarrow$]
          \item Two streams of features are extracted using Hough transform:
                {\footnotesize\begin{itemize}[topsep=0pt,label=-]
                  \item WGE stream
                  \item S\&H stream
                \end{itemize}}
          \item Multiple truncated edges are merged into one line
        \end{itemize}}
    \end{column}
  \end{columns}

  \begin{columns}[T,onlytextwidth]
    \begin{column}{0.6\textwidth}
      \begin{itemize}[leftmargin=0.45cm,label=$\bullet$]
        \item The knowledge of the ROI allows to tune Hough hyperparameters adaptively to obtain desired behavior
              \smallskip
        \item Edges outside the ROI are rejected
      \end{itemize}
    \end{column}
    \begin{column}{0.5\textwidth}
      \vspace{0.28cm}
      \centering
      \hspace{-0.95cm}
      \includegraphics[width=0.35\textwidth]{gfx/segmentsPreMerge.eps}
      \hspace{0.1cm}
      \includegraphics[width=0.35\textwidth]{gfx/segmentsAfterMerge.eps}
    \end{column}
  \end{columns}

\end{frame}

\begin{frame}{Feature-based pose estimation}

  \textsc{\textbf{\large Image processing subsystem - 3}}

  \bigskip

  \textsc{\textbf{\tikzrarrow Custom implementation}}

  \smallskip

  \begin{itemize}[leftmargin=0.5cm,label=$\bullet$]
    \item ROI it's enlarged by adding the 5\% of the mean edge length of the detected ROI to not penalize images presenting a black background
    \item Prior applying Hough transform to the Sobel image, to eliminate the pixel chunks belonging to smaller reflective elements from the output of Hough, all connected components (objects) that have fewer than P pixels from the input binary image are removed
    \item The edge merging procedure is applied to both streams
  \end{itemize}

\end{frame}

\begin{frame}{Feature-based pose estimation}

  \textsc{\textbf{\large Image processing subsystem - 4}}

  \begin{figure}
    \centering
    \captionsetup[subfigure]{labelformat=empty}
    \subfloat[WGE stream]{\includegraphics[width=0.25\textwidth]{gfx/FeatureDetection/214/10.png}}
    \qquad
    \subfloat[S\&H stream]{\includegraphics[width=0.25\textwidth]{gfx/FeatureDetection/214/11.png}}
    \qquad
    \subfloat[WGE merge]{\includegraphics[width=0.25\textwidth]{gfx/FeatureDetection/214/12.png}}
    \qquad
    \subfloat[S\&H merge]{\includegraphics[width=0.25\textwidth]{gfx/FeatureDetection/214/13.png}}
    \qquad
    \subfloat[WGE + S\&H]{\includegraphics[width=0.25\textwidth]{gfx/FeatureDetection/214/14.png}}
    \qquad
    \subfloat[Merge stream]{\includegraphics[width=0.25\textwidth]{gfx/FeatureDetection/214/15.png}}
  \end{figure}

\end{frame}

\begin{frame}{Feature-based pose estimation}

  \smallskip

  \textsc{\textbf{\large Perceptual Grouping}}

  \bigskip

  \textbf{\tikzrarrow Allows to reduce the search space of the correspondence problem}

  \smallskip

  \begin{columns}[T,onlytextwidth]
    \begin{column}{0.4\textwidth}
      \vspace{0.3cm}
      2D perceptual groups are defined on the basis of some geometrical constraints
    \end{column}
    \begin{column}{0.5\textwidth}
      \vspace{-0.7cm}
      \begin{figure}
        \captionsetup[subfigure]{labelformat=empty}
        \hspace{-0.8cm}\subfloat[Parallel Pair]{\includegraphics[width=0.22\textwidth]{gfx/parallelPair.eps}}
        \subfloat[Proximity Pair]{\includegraphics[width=0.22\textwidth]{gfx/proximityPair.eps}}
        \subfloat[Parallel Triad]{\includegraphics[width=0.22\textwidth]{gfx/parallelTriad.eps}}
        \subfloat[Proximity Triad]{\includegraphics[width=0.22\textwidth]{gfx/proximityTriad.eps}}
        \subfloat[Closed Polygonal Tetrad]{\includegraphics[width=0.22\textwidth]{gfx/closedPolygonalTetrad.eps}}
      \end{figure}
    \end{column}
  \end{columns}

  \bigskip

  \begin{columns}[T,onlytextwidth]
    \begin{column}{0.6\textwidth}
      \vspace{0.38cm}
      \hspace{-0.3cm}
      \includegraphics[width=0.45\textwidth]{gfx/cadFull.eps}
      \hspace{0.1cm}
      \includegraphics[width=0.45\textwidth]{gfx/wireframeModel.eps}
    \end{column}
    \hspace{0.2cm}
    \begin{column}{0.45\textwidth}
      Carried out on a wireframe\\ model too by applying 3D\\ geometry definitions\\ instead of 2D ones
    \end{column}
  \end{columns}

\end{frame}

\begin{frame}{Result}

  \bigskip

  \textsc{\textbf{\large Successful pose initialization}}\\

  \bigskip

  \tikzrarrow Obtained using P3P solver coupled with a RANSAC algorithm for outlier\\ \tikzrarrowspace rejection instead of ePnP

  \vspace{-0.6cm}

  \begin{columns}[T,onlytextwidth]
    \begin{column}{0.5\textwidth}
      \begin{figure}
        \centering
        \captionsetup[subfigure]{labelformat=empty}
        \setbox1=\hbox{\includegraphics[width=0.48\textwidth]{gfx/poseDetermination/trial49modelMap.eps}}% The smaller image
        \setbox2=\hbox{\includegraphics[width=0.48\textwidth]{gfx/poseDetermination/cameraWRTSC49.eps}}% The larger image
        {\,} \hfill
        \subfloat[]{%
          \raisebox{0.5\ht2-0.5\ht1}{\includegraphics[width=0.48\textwidth]{gfx/poseDetermination/trial49modelMap.eps}}} \hfill
        \subfloat[]{%
          \includegraphics[width=0.48\textwidth]{gfx/poseDetermination/cameraWRTSC49.eps}} \hfill
        {\,}
      \end{figure}
    \end{column}

    \begin{column}{0.5\textwidth}

      \vspace{0.38cm}

      \begin{figure}
        \centering
        \captionsetup[subfigure]{labelformat=empty}
        \setbox1=\hbox{\includegraphics[width=0.48\textwidth]{gfx/poseDetermination/trial311modelMap.eps}}% The smaller image
        \setbox2=\hbox{\includegraphics[width=0.48\textwidth]{gfx/poseDetermination/cameraWRTSC311.eps}}% The larger image
        {\,} \hfill
        \subfloat[]{%
          \raisebox{0.5\ht2-0.5\ht1}{\includegraphics[width=0.45\textwidth]{gfx/poseDetermination/trial311modelMap.eps}}} \hfill
        \subfloat[]{%
          \includegraphics[width=0.48\textwidth]{gfx/poseDetermination/cameraWRTSC311.eps}} \hfill
        {\,}
      \end{figure}
    \end{column}
  \end{columns}

  \vspace{-0.2cm}

  Figures are showing the map superposed to the image and the 3D camera pose in map coordinates

\end{frame}

\section{Results}

% Section page.
\begin{frame}[plain]{}
  \sectionpage
\end{frame}

\begin{frame}{Qualitative Assessment}

  \bigskip

  \textsc{\textbf{\large SPEED VS Implemented Tool}}

  \bigskip

  \begin{minipage}[t]{1.0\textwidth}
    \tikzrarrow Speed
    \vspace{-0.46cm}
    \begin{figure}
      \centering
      \captionsetup[subfigure]{labelformat=empty}
      \subfloat[Unfiltered Image]{\includegraphics[width=0.25\textwidth]{gfx/comparison/comp2/1.eps}}
      \qquad
      \subfloat[Image Histogram]{\includegraphics[width=0.3\textwidth]{gfx/comparison/comp2/3.eps}}
      \qquad
      \subfloat[Sobel Image]{\includegraphics[width=0.25\textwidth]{gfx/comparison/comp2/5.eps}}

      \vspace{0.1cm}
      \hspace{-8.5cm} \tikzrarrow Implemented Tool\\
      
      \vspace{-0.26cm}
      \subfloat[Unfiltered Image]{\includegraphics[width=0.25\textwidth]{gfx/comparison/comp2/2.eps}}
      \qquad
      \subfloat[Image Histogram]{\includegraphics[width=0.3\textwidth]{gfx/comparison/comp2/4.eps}}
      \qquad
      \subfloat[Sobel Image]{\includegraphics[width=0.25\textwidth]{gfx/comparison/comp2/6.eps}}
      \qquad
    \end{figure}
  \end{minipage}%
\end{frame}

\begin{frame}{Qualitative Assessment}

  \bigskip

  \textsc{\textbf{\large SPEED VS Implemented Tool}}

  \bigskip

  \begin{minipage}[t]{1.0\textwidth}
    \tikzrarrow Speed
    \vspace{-0.46cm}
    \begin{figure}
      \centering
      \captionsetup[subfigure]{labelformat=empty}
      \subfloat[Unfiltered Image]{\includegraphics[width=0.25\textwidth]{gfx/comparison/comp4/1.eps}}
      \qquad
      \subfloat[Image Histogram]{\includegraphics[width=0.3\textwidth]{gfx/comparison/comp4/3.eps}}
      \qquad
      \subfloat[Sobel Image]{\includegraphics[width=0.25\textwidth]{gfx/comparison/comp4/5.eps}}

      \vspace{0.1cm}
      \hspace{-8.5cm} \tikzrarrow Implemented Tool\\
      
      \vspace{-0.26cm}
      \subfloat[Unfiltered Image]{\includegraphics[width=0.25\textwidth]{gfx/comparison/comp4/2.eps}}
      \qquad
      \subfloat[Image Histogram]{\includegraphics[width=0.3\textwidth]{gfx/comparison/comp4/4.eps}}
      \qquad
      \subfloat[Sobel Image]{\includegraphics[width=0.25\textwidth]{gfx/comparison/comp4/6.eps}}
      \qquad
    \end{figure}
  \end{minipage}%
\end{frame}

\begin{frame}{SVD Algorithm}

  \bigskip

  \textsc{\textbf{\large Failures}}

  \smallskip

  ROI Detection \tikzrarrow Due to composite background
  
  \smallskip

  \begin{minipage}[t]{1.0\textwidth}
    {\small \hspace{2.5cm}Implemented Tool \hspace{0.7cm} SPEED}
    \vspace{-0.48cm}
    \begin{figure}
      \centering
      \captionsetup[subfigure]{labelformat=empty}
      \subfloat[Detected ROI]{\includegraphics[width=0.27\textwidth]{gfx/roiFailure/1.eps}}
      \hspace{0.1cm}
      \subfloat[Detected ROI]{\includegraphics[width=0.27\textwidth]{gfx/roiFailure/speedROICropped.eps}}\\
      \vspace{-0.3cm}
      \subfloat[Tresholded Gradient]{\includegraphics[width=0.27\textwidth]{gfx/roiFailure/3.eps}}
      \hspace{0.1cm}
      \subfloat[Tresholded Gradient]{\includegraphics[width=0.27\textwidth]{gfx/roiFailure/ROIspeedFailure.eps}}
    \end{figure}
  \end{minipage}%

\end{frame}

\begin{frame}{SVD Algorithm}

  \bigskip

  \textsc{\textbf{\large Rotational and translational errors}}

  \bigskip

  \begin{minipage}[t]{0.4\textwidth}
    \vspace{0.01mm}
    Translational Error\\

    \smallskip

    \hspace{0.3cm}\tikzrarrow Mean error: $0.2506$ m

  \end{minipage}%
  \begin{minipage}[t]{0.6\textwidth}
    \vspace{0.01mm}
    \centering
    \includegraphics[width=0.73\textwidth]{gfx/plotError/transHistBIGFONT.eps}
  \end{minipage}

  \smallskip

  \begin{minipage}[t]{0.4\textwidth}
    \vspace{0.01mm}
    Rotational Error\\

    \smallskip

    \hspace{0.3cm}\tikzrarrow Mean error: $0.0528^\circ$

  \end{minipage}%
  \begin{minipage}[t]{0.6\textwidth}
    \vspace{0.01mm}
    \centering
    \includegraphics[width=0.73\textwidth]{gfx/plotError/rotHistBIGFONT.eps}
  \end{minipage}

  \bigskip

\end{frame}

\begin{frame}{SVD Algorithm}

  \bigskip

  \textsc{\textbf{\large Errors WRT inter-spacecraft distance}}

  \bigskip

  \begin{minipage}[t]{0.4\textwidth}
    \vspace{0.01mm}
    Translational Error\\

    \smallskip

    \hspace{0.3cm}\tikzrarrow Increases with distance

  \end{minipage}%
  \begin{minipage}[t]{0.6\textwidth}
    \vspace{0.01mm}
    \centering
    \includegraphics[width=0.73\textwidth]{gfx/plotError/transAndDistBIGFONT.eps}
  \end{minipage}

  \smallskip

  \begin{minipage}[t]{0.4\textwidth}
    \vspace{0.01mm}
    Rotational Error\\

    \smallskip

    \hspace{0.3cm}\tikzrarrow No recognizable trend

  \end{minipage}%
  \begin{minipage}[t]{0.6\textwidth}
    \vspace{0.01mm}
    \centering
    \includegraphics[width=0.73\textwidth]{gfx/plotError/rotAndDistBIGFONT.eps}
  \end{minipage}

  \bigskip

\end{frame}

\begin{frame}{SVD Algorithm}

  \bigskip

  \textsc{\textbf{\large Camera axis error}}

  \bigskip

  \tikzrarrow No preferred axis

  \bigskip

  \centering
  \includegraphics[width=0.8\textwidth]{gfx/plotError/c3c2c1BIGFONT.eps}

  \bigskip

\end{frame}

\section{Conclusions}
% Section page.
\begin{frame}[plain]{}
  \sectionpage
\end{frame}

\begin{frame}{Results Summary}

  \bigskip

  \textsc{\textbf{\large Image Generation Tool}}

  \bigskip

  \hspace{0.3cm}\tikzrarrow Image toolbox is fully automated

  \smallskip

  \hspace{0.3cm}\tikzrarrow Controlled and uncontrolled behavior can be simulated \\ \hspace{0.3cm}\tikzrarrowspace as well as well as approach

  \smallskip

  \hspace{0.3cm}\tikzrarrow Generated images are compatible with data-sets claimed to be\\ \hspace{0.3cm}\tikzrarrowspace representative by the scientific community

  \bigskip

  \textsc{\textbf{\large SVD Algorithm}}

  \bigskip

  \hspace{0.3cm}\tikzrarrow Successfully tested SVD algorithm

  \smallskip

  \hspace{0.3cm}\tikzrarrow Results seems to be promising

\end{frame}

\begin{frame}{Improvements}

  \bigskip

  \textsc{\textbf{\large Image Generation Tool}}

  \bigskip

  \hspace{0.3cm}\tikzrarrow Use better textures for the S/C and the Earth

  \smallskip

  \hspace{0.3cm}\tikzrarrow Use a more rigorous method to set optical parameters

  \smallskip

  \hspace{0.3cm}\tikzrarrow Improve noise model

  \smallskip

  \hspace{0.3cm}\tikzrarrow Patch POV-Ray code to allow GPU cores usage for rendering

  \bigskip

  \textsc{\textbf{\large SVD Algorithm}}

  \bigskip

  \hspace{0.3cm}\tikzrarrow Employ separated Hough transforms to detect different geometric\\ \hspace{0.3cm}\tikzrarrowspace shapes

  \smallskip

  \hspace{0.3cm}\tikzrarrow Improve edge detection procedure (solar panels, distance are an issue)

  \smallskip

  \hspace{0.3cm}\tikzrarrow Compare different pose solvers

  \smallskip

  \hspace{0.3cm}\tikzrarrow Hardware-in-the-loop experiments to evaluate the computational time\\ \hspace{0.3cm}\tikzrarrowspace on real H/W.

  \bigskip

\end{frame}

\begin{frame}{The End}

  \bigskip

  \centering \Large

  \emph{Thanks for your attention!}

  \bigskip

  \centering \Large

  \emph{If you have any question, feel free to ask!}

\end{frame}

\appendix
\section{Additional Material}

% Section page.
\begin{frame}[plain]{}
  \sectionpage
\end{frame}

\begin{frame}{Environment Modeling}

  \bigskip

  \textsc{\textbf{\large Earth Modeling}}

  \bigskip

  \tikzrarrow Binary image Comparison

  \begin{figure}
    \captionsetup[subfigure]{labelformat=empty}
    \centering
    \subfloat[]{\includegraphics[width=0.18\textwidth]{gfx/TerraNoAcquaNoAtmo.eps}}
    \hspace{0.3cm}
    \subfloat[]{\includegraphics[width=0.18\textwidth]{gfx/TerraSiAcquaNoAtmo.eps}}
    \hspace{0.3cm}
    \subfloat[]{\includegraphics[width=0.18\textwidth]{gfx/TerraSiAcquaSiAtmo.eps}}\\
    \vspace{-0.4cm}
    \subfloat[]{\includegraphics[width=0.18\textwidth]{gfx/BW_TerraNoAcquaNoAtmo.eps}}
    \hspace{0.3cm}
    \subfloat[]{\includegraphics[width=0.18\textwidth]{gfx/BW_TerraSiAcquaNoAtmo.eps}}
    \hspace{0.3cm}
    \subfloat[]{\includegraphics[width=0.18\textwidth]{gfx/BW_TerraSiAcquaSiAtmo.eps}}
  \end{figure}

  \bigskip

\end{frame}

\begin{frame}{Environment Modeling}

  \bigskip

  \textsc{\textbf{\large Light Modeling}}

  \bigskip

  \tikzrarrow The Sun can be modeled using POV-Ray \textbf{area\_light} feature:

  \smallskip

  \begin{itemize}[leftmargin=1.2cm,label=$\bullet$]
    \item it create a cluster of point-like light sources distributed on a disc
    \item the radius of the disc is set to the radius of the Sun, and placed at the exact distance which the Sun has from the Earth
    \item the \textbf{orient} option makes every object see the Sunâ€™s disc as oriented toward it, from any position around it
  \end{itemize}

\end{frame}

\begin{frame}{Spacecraft Modeling}

  \bigskip

  \textsc{\textbf{\large 3D Model of the Spacecraft}}

  \bigskip

  \tikzrarrow Based on  the TANGO spacecraft from the PRISMA mission:

  \smallskip

  \begin{minipage}[t]{0.5\textwidth}
    \vspace{1.0cm}
    \begin{itemize}[leftmargin=0.7cm,label=$\bullet$]
      \item 570 mm x 759 mm solar panel
      \item 560 mm x 550 mm x 300 mm body
      \item 4x 204 mm antennas
    \end{itemize}
  \end{minipage}%
  \begin{minipage}[t]{0.5\textwidth}
    \vspace{0.01cm}
    \hspace{-0.2cm}
    \centering
    \includegraphics[width=0.85\textwidth]{gfx/tangoScreenshot2.eps}
  \end{minipage}

\end{frame}

\begin{frame}{Camera Modeling}

  \bigskip

  \textsc{\textbf{\large Reference Frames and Ground Truth Pose}}

  \bigskip

  \tikzrarrow POV-Ray by default works using a Left Handed Coordinate System

  \bigskip

  \hspace{0.3cm}$\bullet$ Flip it to use a Right Handed Coordinate System

  \smallskip

  \hspace{0.3cm}$\bullet$  Compute camera attitude by the knowledge of camera position \\ \hspace{0.5cm} and camera looking direction

  \smallskip

  \hspace{0.3cm}$\bullet$  Compute ground truth pose by knowledge of camera attitude \\ \hspace{0.5cm} and target attitude

  \smallskip

  \begin{minipage}[t]{1.0\textwidth}
    \begin{figure}
      \centering
      \captionsetup[subfigure]{labelformat=empty}
      \subfloat[]{\includegraphics[width=0.22\textwidth]{gfx/tangoAxesNormal.eps}}
      \hspace{0.1cm}
      \subfloat[]{\includegraphics[width=0.22\textwidth]{gfx/tangoAxesAfterRight.eps}}
      \hspace{0.1cm}
      \subfloat[]{\includegraphics[width=0.22\textwidth]{gfx/tangoAxesSky.eps}}
    \end{figure}
  \end{minipage}%

\end{frame}

\begin{frame}{Spacecraft Modeling}

  \bigskip

  \textsc{\textbf{\large Bounding issue}}

  \bigskip

  This system compartmentalizes all finite objects in a scene into invisible rectangular boxes that are arranged in a tree-like hierarchy. Before testing the objects within the bounding boxes the tree is descended and only those objects whose bounds are hit by a ray are tested.

  \smallskip

  \begin{figure}
    \captionsetup[subfigure]{labelformat=empty}
    \centering
    \subfloat[Bounding on]{\includegraphics[width=0.27\textwidth]{gfx/tangoNoMb.eps}}
    \qquad
    \subfloat[Bounding off]{\includegraphics[width=0.27\textwidth]{gfx/tangoMb.eps}}
    \qquad
  \end{figure}

  \bigskip
\end{frame}

\begin{frame}{Pose Problem}

  \bigskip

  \begin{overlayarea}{\textwidth}{0.8\textheight}
    \textsc{\textbf{\large Pose estimation problem}}\\
    \bigskip
    \begin{columns}[T,onlytextwidth]
      \begin{column}{.45\textwidth}
        \hspace{0.3cm}
        \centering
        \includegraphics[width=0.8\textwidth]{gfx/poseProblem.eps}
        \smallskip
      \end{column}
      \begin{column}{.48\textwidth}
        \hspace{-0.5cm}
        \centering
        \textul{2D/3D true perspective equations}
        \vspace{0.2cm}
        \begin{equation*}
          \mathbf{r_C} = \left[x_C \quad  y_C \quad z_C\right]^T = \mathbf{A_{TC}} \; \mathbf{q_B} + \mathbf{t_C} \,
        \end{equation*}
        \vspace{-0.3cm}
        \begin{equation*}
          \mathbf{p} = \left[ \frac{x_C}{z_C} f_x + C_x , \ \frac{y_C}{z_C} f_y + C_y \right] \,
        \end{equation*}
        \vspace{0.2cm}
        \tikzrarrow $\left(\mathbf{A_{TC}},  \mathbf{t_C}\right) $ \tikzlarrow
      \end{column}
    \end{columns}
    \smallskip
    \begin{minipage}[t]{1.0\textwidth}
      \vspace{0.3cm}
      $\bullet$ Highly non linear and can have $\infty$ solutions if undercostrained\\
      $\bullet$ No \textit{a priori} knowledge of the correspondence between $\mathbf{q_B}$ and $\mathbf{p}$\\
      $\bullet$ Image has to be corrected for pixel's non-quadratism and lens distortion
    \end{minipage}%
  \end{overlayarea}

\end{frame}

\begin{frame}{Feature-based pose estimation}

  \bigskip

  \textsc{\textbf{\large Image processing subsystem}}

  \bigskip

  ROI it's enlarged by adding the 5\% of the mean edge length of the detected ROI to not penalize images having a black background from a too strict tresholding of the normalized gradient.

  \smallskip

  \begin{figure}
    \captionsetup[subfigure]{labelformat=empty}
    \centering
    \subfloat[Detected ROI]{\includegraphics[width=0.37\textwidth]{gfx/ROInoConstant.eps}}
    \qquad
    \subfloat[Enlarged ROI]{\includegraphics[width=0.37\textwidth]{gfx/enlargedROI.eps}}
    \qquad
  \end{figure}

  \bigskip
\end{frame}

\begin{frame}{SVD Algorithm}

  \bigskip

  \textsc{\textbf{\large Failures}}

  \smallskip

  Edge Detection \tikzrarrow Due to solar panels or distance

  \begin{minipage}[t]{1.0\textwidth}
    \begin{figure}
      \centering
      \captionsetup[subfigure]{labelformat=empty}
      \subfloat[WGE Stream]{\includegraphics[width=0.22\textwidth]{gfx/panelFailure/1.eps}}
      \hspace{0.1cm}
      \subfloat[S\&H Stream]{\includegraphics[width=0.22\textwidth]{gfx/panelFailure/2.eps}}
      \hspace{0.1cm}
      \subfloat[Merging streams]{\includegraphics[width=0.22\textwidth]{gfx/panelFailure/3.eps}}
    \end{figure}
  \end{minipage}%

  \bigskip

  \begin{minipage}[t]{1.0\textwidth}
    \begin{figure}
      \centering
      \captionsetup[subfigure]{labelformat=empty}
      \subfloat[Tresholded Gradient]{\includegraphics[width=0.22\textwidth]{gfx/distanceFailure/1.eps}}
      \hspace{0.1cm}
      \subfloat[WGE Stream]{\includegraphics[width=0.22\textwidth]{gfx/distanceFailure/2.eps}}
      \hspace{0.1cm}
      \subfloat[S\&H Stream]{\includegraphics[width=0.22\textwidth]{gfx/distanceFailure/3.eps}}
      \hspace{0.1cm}
      \subfloat[Merging Streams]{\includegraphics[width=0.22\textwidth]{gfx/distanceFailure/4.eps}}
    \end{figure}
  \end{minipage}%

\end{frame}

\end{document}

